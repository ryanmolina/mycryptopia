!function(a){a(document).ready(function(){var b="https://blockchain.info/",c=a(".blockchain-btn");c.find(".blockchain").hide(),c.find(".stage-begin").trigger("show").show(),c.each(function(c){var d=a(this);!function(){var c=d;c.click(function(){function d(){a.ajax({type:"GET",url:b+"q/getreceivedbyaddress/"+e+"?start_time="+(new Date).getTime(),data:{format:"plain"},success:function(a){if(a){var b=parseInt(a);b>0||f?(c.find(".blockchain").hide(),c.find(".stage-paid").trigger("show").show().html(c.find(".stage-paid").html().replace("[[value]]",b/1e8))):setTimeout(d,5e3)}}})}var e=a(this).data("address"),f=a(this).data("test");c.find(".blockchain").hide(),c.find(".stage-loading").trigger("show").show(),c.find(".qr-code").empty();try{if(ws=new WebSocket("wss://ws.blockchain.info/inv"),!ws)return;ws.onmessage=function(b){try{var d=a.parseJSON(b.data),f=0;if("utx"==d.op)for(var g=d.x,h=0;h<g.out.length;h++){var i=g.out[h];i.addr==e&&(f+=parseInt(i.value))}c.find(".blockchain").hide(),c.find(".stage-paid").trigger("show").show().html(c.find(".stage-paid").html().replace("[[value]]",f/1e8)),ws.close()}catch(a){console.log(a),console.log(a.data)}},ws.onopen=function(){ws.send('{"op":"addr_sub", "addr":"'+e+'"}')}}catch(a){console.log(a)}c.find(".stage-ready").trigger("show").show().html(c.find(".stage-ready").html().replace("[[address]]",e)),c.find(".qr-code").html('<img style="margin:5px" src="'+b+"qr?data="+e+'&size=125">'),c.unbind(),setTimeout(d,5e3)})}()})})}(jQuery);